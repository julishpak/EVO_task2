<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Приветствие</title>
    <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>



      <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>


      <script>

      \r(document).ready(function()
      {
         // initialize the viewer
         \r('#runajax').click(function(event){

            var valueForInput = \r("#input").val();

            var data =
               {
                  name: valueForInput
               };

               var dataToSend = JSON.stringify(data);

            \r.ajax(
            {
               url: '/greet/',
               type: 'POST',
               data: dataToSend,

               success: function(jsonResponse)
               {
                  var objresponse = JSON.parse(jsonResponse);
                  console.log(objresponse['newkey']);

                  \r("#responsefield").text(objresponse['newkey']);

               },
               error: function()
               {
                  \r("#responsefield").text("Error to load api");

               }
            });

         event.preventDefault();
         });
      });
      </script>
</head>
<body background="/static/bg.jpg" style="background-size:cover">

      <div class="container">
         <div class="span">
            <div id="sdcontainer">
             <form class="well form-inline" align = "center" style="background: rgba(90, 95, 105, 0.89)">
               <input id="input" type="text" class="input" style="height:33px" placeholder="Как Вас зовут?">
               <button id="runajax" class="btn btn-warning ">Поздороваться</button>
             </form>
                <center>
                    <span id="responsefield"  text-align = "center" style="font-family:Verdana, sans-serif; font-size: x-large; position: relative;  color:white"></span>
                </center>
            </div>
         </div>
      </div>

</body>
</html>